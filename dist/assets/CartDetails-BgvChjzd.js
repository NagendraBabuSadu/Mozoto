import{r as n,j as t,F as Y,E as $,k as G,u as h,l as O,c as x,m as X,f as _,d as L,n as Q,o as W,s as z,p as J}from"./index-CcvtMoee.js";function K(){const e=n.useRef(!0),a=n.useRef(()=>e.current);return n.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),a.current}function V(e){const a=n.useRef(e);return a.current=e,a}function Z(e){const a=V(e);n.useEffect(()=>()=>a.current(),[])}const N=2**31-1;function R(e,a,r){const o=r-Date.now();e.current=o<=N?setTimeout(a,o):setTimeout(()=>R(e,a,r),N)}function I(){const e=K(),a=n.useRef();return Z(()=>clearTimeout(a.current)),n.useMemo(()=>{const r=()=>clearTimeout(a.current);function o(d,l=0){e()&&(r(),l<=N?a.current=setTimeout(d,l):R(a,d,Date.now()+l))}return{set:o,clear:r,handleRef:a}},[])}const P={[G]:"showing",[$]:"showing show"},w=n.forwardRef((e,a)=>t.jsx(Y,{...e,ref:a,transitionClasses:P}));w.displayName="ToastFade";const k=n.createContext({onClose(){}}),q=n.forwardRef(({bsPrefix:e,closeLabel:a="Close",closeVariant:r,closeButton:o=!0,className:d,children:l,...i},s)=>{e=h(e,"toast-header");const c=n.useContext(k),u=O(m=>{c==null||c.onClose==null||c.onClose(m)});return t.jsxs("div",{ref:s,...i,className:x(e,d),children:[l,o&&t.jsx(X,{"aria-label":a,variant:r,onClick:u,"data-dismiss":"toast"})]})});q.displayName="ToastHeader";const D=n.forwardRef(({className:e,bsPrefix:a,as:r="div",...o},d)=>(a=h(a,"toast-body"),t.jsx(r,{ref:d,className:x(e,a),...o})));D.displayName="ToastBody";const S=n.forwardRef(({bsPrefix:e,className:a,transition:r=w,show:o=!0,animation:d=!0,delay:l=5e3,autohide:i=!1,onClose:s,onEntered:c,onExit:u,onExiting:m,onEnter:j,onEntering:F,onExited:H,bg:y,...M},A)=>{e=h(e,"toast");const b=n.useRef(l),p=n.useRef(s);n.useEffect(()=>{b.current=l,p.current=s},[l,s]);const C=I(),g=!!(i&&o),T=n.useCallback(()=>{g&&(p.current==null||p.current())},[g]);n.useEffect(()=>{C.set(T,b.current)},[C,T]);const U=n.useMemo(()=>({onClose:s}),[s]),v=!!(r&&d),E=t.jsx("div",{...M,ref:A,className:x(e,a,y&&`bg-${y}`,!v&&(o?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return t.jsx(k.Provider,{value:U,children:v&&r?t.jsx(r,{in:o,onEnter:j,onEntering:F,onEntered:c,onExit:u,onExiting:m,onExited:H,unmountOnExit:!0,children:E}):E})});S.displayName="Toast";const f=Object.assign(S,{Body:D,Header:q}),tt={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},B=n.forwardRef(({bsPrefix:e,position:a,containerPosition:r,className:o,as:d="div",...l},i)=>(e=h(e,"toast-container"),t.jsx(d,{ref:i,...l,className:x(e,a&&tt[a],r&&`position-${r}`,o)})));B.displayName="ToastContainer";const et="/assets/react-CHdo91hT.svg",at=()=>{const{carts:e}=_(s=>s.allCart),a=L(),[r,o]=n.useState(!1),d=s=>{a(J(s))},l=s=>{a(W(s)),setTimeout(()=>{const c=z.getState().allCart.carts;console.log("updateCart",c);const u=c.reduce((m,j)=>m+j.qnty,0);console.log("TotalItems",u),u===0&&o(!0)},0)},i=s=>{a(Q(s)),o(!0)};return t.jsxs("div",{className:"row justify-content-center m-0",children:[t.jsx(B,{position:"top-end",className:"p-3",children:r&&t.jsxs(f,{className:"d-inline-block m-1",onClose:()=>o(!1),delay:3e3,autohide:!0,bg:"danger",children:[t.jsxs(f.Header,{children:[t.jsx("i",{className:"fa fa-shopping-cart"})," ",t.jsx("strong",{className:"me-auto text-black",children:"Cart is emptied"})]}),t.jsx(f.Body,{className:" text-white",children:"Your cart has been cleared successfully."})]})}),t.jsx("div",{className:"col-md-8 mt-5 mb-5 cardsDetails",children:t.jsxs("div",{className:"card",children:[t.jsx("div",{className:"card-header bg-dark p-3",children:t.jsxs("div",{className:"card-header-flex",style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[t.jsxs("h5",{style:{color:"lightgrey",margin:0},children:["Cart Details (",e.reduce((s,c)=>s+(c==null?void 0:c.qnty),0),")"]}),e.length>0&&t.jsxs("button",{className:"btn btn-danger btn-sm",onClick:s=>i(s),children:[t.jsx("i",{className:"fa fa-trash-alt mr-2"}),t.jsx("span",{children:"Empty Cart"})]})]})}),t.jsx("div",{className:"card-body p-0",children:e.length===0?t.jsx("table",{className:"table cart-table mb-0",children:t.jsx("tbody",{children:t.jsx("tr",{children:t.jsx("td",{children:t.jsxs("div",{className:"cart-empty",children:[t.jsx("i",{className:"fa fa-shopping-cart"}),t.jsx("p",{children:"Your Cart is Empty"})]})})})})}):t.jsxs("table",{className:"table cart-table mb-0 table-responsive-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"Action"}),t.jsx("th",{children:"Product"}),t.jsx("th",{children:"Name"}),t.jsx("th",{children:"Price"}),t.jsx("th",{children:"Quantity"}),t.jsx("th",{className:"text-right",children:"Total Amount"})]})}),t.jsx("tbody",{children:e==null?void 0:e.map((s,c)=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx("button",{className:"btn btn-danger btn-sm",children:t.jsx("i",{className:"fa fa-trash-alt"})})}),t.jsx("td",{children:t.jsx("div",{className:"product-img",children:t.jsx("img",{src:s.imgdata||et,alt:"product"})})}),t.jsx("td",{children:t.jsx("div",{className:"product-name",children:t.jsx("p",{children:s.dish})})}),t.jsx("td",{children:s.price}),t.jsx("td",{children:t.jsxs("div",{className:"prdct-qty-container",children:[t.jsx("button",{className:"prdct-qty-btn",onClick:()=>l(s),children:t.jsx("i",{className:"fa fa-minus"})}),t.jsx("input",{type:"text",className:"qty-input-box",disabled:!0,value:s==null?void 0:s.qnty}),t.jsx("button",{className:"prdct-qty-btn",onClick:()=>d(s),children:t.jsx("i",{className:"fa fa-plus"})})]})}),t.jsx("td",{className:"text-right",children:s.qnty*s.price})]},s.id))}),t.jsx("tfoot",{children:t.jsxs("tr",{children:[t.jsx("td",{colSpan:4}),t.jsxs("td",{children:["Items in Cart: ",t.jsx("span",{className:"text-danger",children:e.reduce((s,c)=>s+c.qnty,0)})]}),t.jsxs("td",{className:"text-right",children:["Total Price:",t.jsxs("span",{className:"ml-2 text-danger",children:["₹ ",e.reduce((s,c)=>s+c.qnty*c.price,0)]})]})]})})]})})]})})]})};export{at as default};
